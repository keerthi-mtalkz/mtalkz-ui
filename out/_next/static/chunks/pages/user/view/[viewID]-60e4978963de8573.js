(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5269],{41048:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/view/[viewID]",function(){return n(37923)}])},32360:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var s=n(26042),r=n(69396),a=n(29815),i=n(85893),c=(n(67294),n(79521)),l=n(45697),o=n.n(l),d=function(e){var t=e.color,n=e.children,s=e.active,r=void 0!==s&&s,a=e.onClick;return r?(0,i.jsx)("button",{onClick:a,className:"btn btn-default btn-".concat(t),children:n}):(0,i.jsx)("button",{onClick:a,className:"btn btn-default btn-default-color",children:n})},u=function(e){var t=e.color,n=e.page,s=e.onClick;return(0,i.jsx)("button",{onClick:s,className:"btn btn-circle btn-".concat(t),children:n})},x=function(e){var t=e.page,n=e.onClick;return(0,i.jsx)("button",{onClick:n,className:"btn btn-circle btn-default-color",children:t})},m=function(e){var t=e.color,n=e.page,s=e.active,r=void 0!==s&&s,a=e.onClick;return r?(0,i.jsx)(u,{onClick:a,page:n,color:t}):(0,i.jsx)(x,{onClick:a,page:n,color:t})},h=function(e){var t=e.color,n=e.items,s=(e.active,e.onClick);return(0,i.jsx)(i.Fragment,{children:n.map((function(e){return(0,i.jsx)(m,{onClick:s,color:t,page:e+1,active:e+1===5},e)}))})};h.propTypes={color:o().string.isRequired,items:o().array.isRequired,active:o().number.isRequired};o().string.isRequired,o().array.isRequired,o().number.isRequired;var f=function(e){var t=e.columns,n=e.data,l=(0,c.useTable)({columns:t,data:n,initialState:{pageIndex:0,pageSize:10}},c.useSortBy,c.usePagination,c.useRowSelect,(function(e){e.visibleColumns.push((function(e){return(0,a.Z)(e)}))})),o=l.getTableProps,u=l.getTableBodyProps,x=l.headerGroups,m=l.prepareRow,h=l.page,f=l.canPreviousPage,v=l.canNextPage,g=l.pageOptions,p=l.pageCount,j=l.gotoPage,b=l.nextPage,w=l.previousPage,N=l.setPageSize,y=(l.selectedFlatRows,l.state),k=y.pageIndex,C=y.pageSize;y.selectedRowIds;return(null===n||void 0===n?void 0:n.length)>0?(0,i.jsxs)("div",{children:[(0,i.jsxs)("table",(0,r.Z)((0,s.Z)({},o()),{className:"table",children:[(0,i.jsx)("thead",{children:x.map((function(e){return(0,i.jsx)("tr",(0,r.Z)((0,s.Z)({},e.getHeaderGroupProps()),{children:e.headers.map((function(e){return(0,i.jsx)("th",(0,r.Z)((0,s.Z)({},e.getHeaderProps(e.getSortByToggleProps())),{children:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-start",children:[(0,i.jsx)("span",{children:e.render("Header")}),(0,i.jsx)("span",{className:"ltr:ml-auto rtl:mr-auto",children:e.isSorted?e.isSortedDesc?(0,i.jsx)("icon",{className:"icon-arrow-down text-xxs"}):(0,i.jsx)("icon",{className:"icon-arrow-up text-xxs"}):""})]})}))}))}))}))}),(0,i.jsx)("tbody",(0,r.Z)((0,s.Z)({},u()),{children:h.map((function(e,t){return m(e),(0,i.jsx)("tr",(0,r.Z)((0,s.Z)({},e.getRowProps()),{children:e.cells.map((function(e){return(0,i.jsx)("td",(0,r.Z)((0,s.Z)({},e.getCellProps()),{style:{"max-width":"10rem"},className:"max-w-xs truncate break-words  text-ellipsis ",children:e.render("Cell")}))}))}))}))}))]})),(0,i.jsxs)("div",{className:"flex flex-row items-center justify-between my-4",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-start children-x-2 pagination",children:[0!==k&&(0,i.jsx)(d,{onClick:function(){return j(0)},color:"text-default",children:"First"}),f&&(0,i.jsx)(d,{onClick:function(){return w()},color:"text-default",children:"Previous"}),v&&(0,i.jsx)(d,{onClick:function(){return b()},disabled:!v,color:"text-default",children:"Next"}),k!==p-1&&(0,i.jsx)(d,{onClick:function(){return j(p-1)},disabled:!v,color:"text-default",children:"Last"})]}),(0,i.jsxs)("span",{children:["Page"," ",(0,i.jsxs)("b",{children:[k+1," of ",g.length]})," "]}),(0,i.jsx)("select",{className:"form-select text-sm",value:C,onChange:function(e){N(Number(e.target.value))},children:[10,25,50,100].map((function(e){return(0,i.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})]}):(0,i.jsx)("div",{className:"text-center",children:"No Records Found"})}},5556:function(e,t,n){"use strict";n.d(t,{RT:function(){return l},Xy:function(){return a},ZN:function(){return c},nA:function(){return i}});var s=n(85893),r=(n(67294),n(94379)),a=function(){return(0,s.jsx)("button",{className:"btn btn-default bg-blue-500 hover:bg-blue-600 active:bg-blue-600 text-white hover:text-white active:text-white",onClick:function(){return r.fn.info("Info message")},children:"Info"})},i=function(){return(0,s.jsx)("button",{className:"btn btn-default bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-600 text-white hover:text-white active:text-white",onClick:function(){return r.fn.warning("Warning message","Close after 3000ms",3e3)},children:"Warning"})},c=function(){return(0,s.jsx)("button",{className:"btn btn-default bg-red-500 hover:bg-red-600 active:bg-red-600 text-white hover:text-white active:text-white",onClick:function(){return r.fn.error("Error message","Click me!",5e3,(function(){alert("callback")}))},children:"Error"})},l=function(){return(0,s.jsx)("button",{className:"btn btn-default bg-green-500 hover:bg-green-600 active:bg-green-600 text-white hover:text-white active:text-white",onClick:function(){return r.fn.success("Success message","Title here")},children:"Success"})}},14101:function(e,t,n){"use strict";var s=n(85893);t.Z=function(e){var t=e.title,n=e.subtitle;return(0,s.jsxs)("div",{className:"flex flex-col py-4 mb-4",children:[(0,s.jsx)("h1",{className:"text-lg text-default font-bold font-poppins",children:t}),(0,s.jsx)("h2",{className:"text-sm text-secondary",children:n})]})}},37923:function(e,t,n){"use strict";n.r(t);var s=n(47568),r=n(70655),a=n(85893),i=n(67294),c=n(36804),l=n(14101),o=n(11163),d=n(34120),u=n(5556),x=n(94379),m=n(30882),h=n(9198),f=n.n(h),v=(n(18698),n(30381)),g=n.n(v),p=n(32360),j=n(2185);t.default=(0,d.X)((function(){var e=(0,o.useRouter)().query.viewID,t=(0,i.useState)({}),n=t[0],d=t[1],h=(0,i.useState)(void 0),v=h[0],b=(h[1],new Date);b.setDate(b.getDate()+1);var w=(0,i.useState)(new Date),N=w[0],y=w[1],k=(0,i.useState)(b),C=k[0],S=k[1],Z=(0,i.useState)([]),_=Z[0],P=Z[1],D=(0,i.useState)(!1),R=(D[0],D[1],(0,j.v9)((function(e){return{userpermissions:e.userpermissions}}),j.wU).userpermissions),Y=(0,i.useState)(void 0),T=Y[0],E=Y[1],I=function(){var t=(0,s.Z)((function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return t=localStorage.getItem("token"),[4,m.ax.get("/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){d(e.data.user)})).catch((function(e){console.error("get /users error",e)}))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}));return function(){return t.apply(this,arguments)}}();(0,i.useEffect)((function(){R.includes("users.activities")&&q(),I()}),[]);var q=function(){var t=(0,s.Z)((function(){var t,n,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return g()(C).diff(g()(N),"days")>0?(E(void 0),t=g()(N).format("YYYY-MM-DD"),n=g()(C).format("YYYY-MM-DD"),s=localStorage.getItem("token"),[4,m.ax.get("/users/".concat(e,"/activities/").concat(t,"/").concat(n),{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){e.data.activities.map((function(e){e.created_at=g()(e.created_at).format("DD-MM-YYYY")})),P(e.data.activities)})).catch((function(e){console.error("get /users error",e)}))]):[3,2];case 1:return r.sent(),[3,3];case 2:void 0!=C&&void 0!=N&&E("end date should be greater than start date"),r.label=3;case 3:return[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(l.Z,{title:"View User",subtitle:""}),"success"===(null===v||void 0===v?void 0:v.type)&&(0,a.jsx)("div",{className:"flex flex-wrap w-full",children:(0,a.jsx)("div",{className:"p-2",children:x.fn.success("Success message","Title here")})}),"error"===(null===v||void 0===v?void 0:v.type)&&(0,a.jsx)("div",{className:"flex flex-wrap w-full",children:(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(u.ZN,{})})}),(0,a.jsxs)("div",{className:"flex ",children:[(0,a.jsx)("div",{className:"p-4 w-full max-w-md bg-white rounded-lg border shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700",children:(0,a.jsx)("div",{className:"flow-root",children:(0,a.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("li",{className:"py-3 sm:py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-1",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Name"})}),(0,a.jsx)("div",{className:"inline-flex truncate items-center text-base font-semibold text-gray-900 dark:text-white",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:n.name})})]})}),(0,a.jsx)("li",{className:"py-3 sm:py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-1",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Email address"})}),(0,a.jsx)("div",{className:"inline-flex truncate items-center text-base font-semibold text-gray-900 dark:text-white",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:n.email})})]})}),(0,a.jsx)("li",{className:"py-3 sm:py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-1",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Organization name"})}),(0,a.jsx)("div",{className:"inline-flex truncate items-center text-base font-semibold text-gray-900 dark:text-white",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:n.org_name})})]})}),(0,a.jsx)("li",{className:"py-3 sm:py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-1",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Created At"})}),(0,a.jsx)("div",{className:"inline-flex truncate items-center text-base font-semibold text-gray-900 dark:text-white",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:new Date(n.created_at).toLocaleString()})})]})})]})})}),(0,a.jsxs)("div",{children:[R.includes("users.activities")&&(0,a.jsxs)("div",{className:"flex ml-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Start Date"}),(0,a.jsx)(f(),{selected:N,onChange:function(e){return y(e)}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"End Date"}),(0,a.jsx)(f(),{selected:C,onChange:function(e){return S(e)}})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:" btn btn-default btn-blue create-btn ",type:"button",onClick:function(){q()},children:"Get Activities"})})]}),void 0!=T&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500 ml-10",children:T}),_.length>0&&R.includes("users.activities")&&void 0===T?(0,a.jsx)("div",{className:"ml-10 mt-10",children:(0,a.jsx)(p.Z,{columns:[{Header:"Activity",accessor:"activity"},{Header:"Type",accessor:"type"},{Header:"Created Date",accessor:"created_at"}],data:_})}):(0,a.jsx)("p",{className:"text-sm ml-10 mt-10 font-medium text-gray-900 truncate dark:text-white",children:R.includes("users.activities")&&"No Activites Found"})]})]})]})}))}},function(e){e.O(0,[4885,5367,196,7955,6268,9521,4544,5776,9774,2888,179],(function(){return t=41048,e(e.s=t);var t}));var t=e.O();_N_E=t}]);