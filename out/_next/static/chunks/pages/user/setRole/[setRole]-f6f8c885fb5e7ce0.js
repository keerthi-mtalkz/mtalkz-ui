(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7788],{9762:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/setRole/[setRole]",function(){return s(98825)}])},14101:function(e,t,s){"use strict";var a=s(85893);t.Z=function(e){var t=e.title,s=e.subtitle;return(0,a.jsxs)("div",{className:"flex flex-col py-4 mb-4",children:[(0,a.jsx)("h1",{className:"text-lg text-default font-bold font-poppins",children:t}),(0,a.jsx)("h2",{className:"text-sm text-secondary",children:s})]})}},98825:function(e,t,s){"use strict";s.r(t);var a=s(47568),r=s(29815),n=s(70655),l=s(85893),o=s(67294),c=s(36804),u=s(14101),i=s(64298),d=s(34120),f=s(11163),h=s(30882),v=s(94379),x=s(85555);t.default=(0,d.X)((function(){var e=(0,f.useRouter)(),t=e.query.setRole,s=(0,o.useState)({}),d=(s[0],s[1],(0,o.useState)(void 0)),m=d[0],p=d[1],g=(0,o.useState)(void 0),b=g[0],N=g[1],j=(0,o.useState)(!1),S=(j[0],j[1],(0,o.useState)([])),w=S[0],_=S[1],y=(0,o.useState)(void 0),I=y[0],k=y[1],R=function(){var e=(0,a.Z)((function(e){var s;return(0,n.__generator)(this,(function(a){switch(a.label){case 0:return s=localStorage.getItem("token"),[4,h.ax.get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(s)}}).then((function(t){var s=localStorage.getItem("orgId"),a=t.data.user.org_roles[s];if(a){var r=e.filter((function(e){return e.value==a}));console.log(r),k([{label:r[0].label,value:r[0].value}])}else k([])})).catch((function(e){console.error("get /users error",e)}))];case 1:a.sent(),a.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)((function(){var e;return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return e=localStorage.getItem("token"),[4,h.ax.get("/roles",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t;t=e.data.map((function(e){return{label:e.name,value:e.id}})),_((0,r.Z)(t)),R(t)})).catch((function(e){var t;p({type:"error",message:null===(t=e.response)||void 0===t?void 0:t.data.message})}))];case 1:t.sent(),t.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){E()}),[]);var Z=(0,i.cI)(),z=(Z.register,Z.handleSubmit);return(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(u.Z,{title:"Set Role",subtitle:""}),"success"===(null===m||void 0===m?void 0:m.type)&&(0,l.jsx)("div",{className:"flex flex-wrap w-full",children:(0,l.jsx)("div",{className:"p-2",children:v.fn.success("Set Role Successfull","Success")})}),"error"===(null===m||void 0===m?void 0:m.type)&&(0,l.jsx)("div",{className:"flex flex-wrap w-full",children:(0,l.jsx)("div",{className:"p-2",children:v.fn.error(m.message,"Error")})}),(0,l.jsx)("div",{className:"flex flex-wrap ",children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("form",{onSubmit:z((function(){var s=localStorage.getItem("orgId");console.log(s,"orgIdorgId");var a=localStorage.getItem("token");h.ax.get("/users/".concat(t,"/set-role/").concat(I[0].value),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){p({type:"success"}),setTimeout((function(){e.push("/user")}),1e3)})).catch((function(e){e.response.data.errors===[]?N(e.response.data.errors):p({type:"error",message:e.response.data.message})}))})),className:"flex flex-col text-sm mb-4 lg:w-1/3",children:[(0,l.jsxs)("div",{className:"w-full mb-4",children:[(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("span",{className:"text-default",children:"Role"}),(0,l.jsx)("div",{style:{width:"300px"},children:(0,l.jsx)(x.ZP,{options:w,placeholder:"Select Role",onChange:function(e){k([{label:e.label,value:e.value}])},value:I})})]}),b&&(0,l.jsx)("p",{className:"mt-1 text-xs text-red-500",children:b.message})]}),(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("input",{type:"submit",className:"btn btn-default btn-block btn-indigo btn-rounded",value:"Set"})})]})})})]})}))}},function(e){e.O(0,[5367,196,7955,6268,4298,5776,9774,2888,179],(function(){return t=9762,e(e.s=t);var t}));var t=e.O();_N_E=t}]);