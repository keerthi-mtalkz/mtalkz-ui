(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1500],{18760:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/organization/view/[viewID]",function(){return n(56887)}])},5556:function(e,t,n){"use strict";n.d(t,{RT:function(){return l},Xy:function(){return r},ZN:function(){return c},nA:function(){return i}});var a=n(85893),s=(n(67294),n(94379)),r=function(){return(0,a.jsx)("button",{className:"btn btn-default bg-blue-500 hover:bg-blue-600 active:bg-blue-600 text-white hover:text-white active:text-white",onClick:function(){return s.fn.info("Info message")},children:"Info"})},i=function(){return(0,a.jsx)("button",{className:"btn btn-default bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-600 text-white hover:text-white active:text-white",onClick:function(){return s.fn.warning("Warning message","Close after 3000ms",3e3)},children:"Warning"})},c=function(){return(0,a.jsx)("button",{className:"btn btn-default bg-red-500 hover:bg-red-600 active:bg-red-600 text-white hover:text-white active:text-white",onClick:function(){return s.fn.error("Error message","Click me!",5e3,(function(){alert("callback")}))},children:"Error"})},l=function(){return(0,a.jsx)("button",{className:"btn btn-default bg-green-500 hover:bg-green-600 active:bg-green-600 text-white hover:text-white active:text-white",onClick:function(){return s.fn.success("Success message","Title here")},children:"Success"})}},14101:function(e,t,n){"use strict";var a=n(85893);t.Z=function(e){var t=e.title,n=e.subtitle;return(0,a.jsxs)("div",{className:"flex flex-col py-4 mb-4",children:[(0,a.jsx)("h1",{className:"text-lg text-default font-bold font-poppins",children:t}),(0,a.jsx)("h2",{className:"text-sm text-secondary",children:n})]})}},56887:function(e,t,n){"use strict";n.r(t);var a=n(47568),s=n(26042),r=n(69396),i=n(70655),c=n(85893),l=n(67294),o=n(36804),d=n(14101),u=n(64298),m=n(34120),x=n(11163),h=n(85555),f=(n(5556),n(94379)),g=n(30882);t.default=(0,m.X)((function(){var e=(0,x.useRouter)().query.viewID,t=(0,u.cI)(),n=t.register,m=(t.handleSubmit,t.watch,(0,l.useState)({})),v=m[0],b=m[1],p=(0,l.useState)(void 0),w=p[0],N=p[1],j=(0,l.useState)([]),y=j[0],k=j[1],S=(0,l.useState)([]),_=S[0],C=S[1],Z=(0,l.useState)(""),z=Z[0],E=Z[1],I=(0,l.useState)({get:!1,update:!1,delete:!1}),A=I[0],B=I[1],T=(0,l.useState)(void 0),P=T[0],X=T[1],O=(0,l.useState)(void 0),R=O[0],q=O[1],D=(0,l.useState)(void 0),F=D[0],U=D[1],V=(0,l.useState)(void 0),W=V[0],G=V[1],H=function(){var t=(0,a.Z)((function(){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t=localStorage.getItem("token"),[4,g.ax.get("/organizations/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){b(e.data.organization)})).catch((function(e){console.error("get /organizations error",e)}))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){K(),M(),H()}),[]);var J=function(){var t=(0,a.Z)((function(){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t=localStorage.getItem("token"),[4,g.ax.get("/organizations/".concat(e,"/credits/").concat(_.value),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){E(e.data.credit),e.data.credit?(X(e.data.credit.active),q(e.data.credit.floating)):(X(0),q(0))})).catch((function(e){console.log(e.response.data.message,"ctredits"),N({type:"error",message:e.response.data.message})}))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}));return function(){return t.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=localStorage.getItem("token"),[4,g.ax.get("/permissions",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=(0,s.Z)({},A);e.data.map((function(e){"organizations.credits.get"==e.route?t=(0,r.Z)((0,s.Z)({},t),{get:!0}):"organizations.credits.update"==e.route?t=(0,r.Z)((0,s.Z)({},t),{update:!0}):"organizations.credits.delete"==e.route&&(t=(0,r.Z)((0,s.Z)({},t),{delete:!0}))})),B((0,s.Z)({},t))})).catch((function(e){var t;N({type:"error",message:null===(t=e.response)||void 0===t?void 0:t.data.message})}))];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),L=function(){var t=(0,a.Z)((function(){var t,n;return(0,i.__generator)(this,(function(a){return U(void 0),G(void 0),t={credits:P||0,floating_credits:R||0},n=localStorage.getItem("token"),g.ax.post("/organizations/".concat(e,"/credits/").concat(_.value),t,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){N({type:"success"})})).catch((function(e){N({type:"error",message:e.response.data.message})})),[2]}))}));return function(){return t.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e=localStorage.getItem("token"),[4,g.ax.get("/resources",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=e.data;t=t.map((function(e){return{label:e.name,value:e.id}})),k(t)})).catch((function(e){N({type:"error",message:e.response.data.message})}))];case 1:return t.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)(o.Z,{children:[(0,c.jsx)(d.Z,{title:"View Organization",subtitle:""}),"success"===(null===w||void 0===w?void 0:w.type)&&(0,c.jsx)("div",{className:"flex flex-wrap w-full",children:(0,c.jsx)("div",{className:"p-2",children:f.fn.success("Updated Credits Successfully","Success")})}),"error"===(null===w||void 0===w?void 0:w.type)&&(0,c.jsx)("div",{className:"flex flex-wrap w-full",children:(0,c.jsx)("div",{className:"p-2",children:f.fn.error(w.message,"Error")})}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)("div",{className:"p-4 w-full max-w-md bg-white rounded-lg border shadow-md sm:p-8 dark:bg-gray-800 dark:border-gray-700",children:(0,c.jsx)("div",{className:"flow-root",children:(0,c.jsxs)("ul",{role:"list",className:"divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("li",{className:"py-3 sm:py-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"flex-1 min-w-1",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Name"})}),(0,c.jsx)("div",{className:"inline-flex items-center truncate text-base font-semibold text-gray-900 dark:text-white",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:v.name})})]})}),(0,c.jsx)("li",{className:"py-3 sm:py-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"flex-1 min-w-1",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Email"})}),(0,c.jsx)("div",{className:"inline-flex items-center text-base truncate font-semibold text-gray-900 dark:text-white",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate truncate dark:text-white",children:v.email})})]})}),(0,c.jsx)("li",{className:"py-3 sm:py-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"flex-1 min-w-1",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Phone No"})}),(0,c.jsx)("div",{className:"inline-flex items-center truncate text-base font-semibold text-gray-900 dark:text-white",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate truncate dark:text-white",children:v.phone})})]})}),(0,c.jsx)("li",{className:"py-3 sm:py-4",children:(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)("div",{className:"flex-1 min-w-1",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate dark:text-white",children:"Address"})}),(0,c.jsx)("div",{className:"inline-flex items-center truncate text-base font-semibold text-gray-900 dark:text-white",children:(0,c.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate truncate dark:text-white",children:v.address})})]})})]})})}),A.get&&(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"ml-10 mb-3 font-semibold",children:" Update Credits"}),(0,c.jsxs)("div",{className:"flex ml-10",children:[(0,c.jsx)("div",{style:{width:"300px"},children:(0,c.jsx)(h.ZP,{options:y,placeholder:"Select Resource",onChange:function(e){N(void 0),C({label:e.label,value:e.value})}})}),(0,c.jsx)("button",{className:"ml-3 btn btn-default btn-indigo create-btn ",type:"button",onClick:J,disabled:0==_.length,children:"Get Credits"})]}),null==z&&(0,c.jsx)("label",{className:"ml-10",children:"No active credits"}),A.update&&""!==z&&(0,c.jsx)("div",{className:" ml-10",children:(0,c.jsxs)("div",{className:"mt-5",children:[(0,c.jsxs)("div",{className:"w-full mb-4",children:[(0,c.jsxs)("label",{className:"block",children:[(0,c.jsx)("span",{className:"text-default",children:"Credits"}),(0,c.jsx)("input",{name:"credits",type:"number",className:"form-input mt-1 text-xs block w-full bg-white",placeholder:"Enter Credits Value",value:P,onChange:function(e){X(parseInt(e.target.value))},required:!0,ref:n()})]}),F&&(0,c.jsx)("p",{className:"mt-1 text-xs text-red-500",children:F})]}),(0,c.jsxs)("div",{className:"w-full mb-4",children:[(0,c.jsxs)("label",{className:"block",children:[(0,c.jsx)("span",{className:"text-default",children:"Enter Floating Credits"}),(0,c.jsx)("input",{name:"floating",type:"number",className:"form-input mt-1 text-xs block w-full bg-white",placeholder:"Enter Floating Credits",onChange:function(e){q(parseInt(e.target.value))},value:R,ref:n()})]}),W&&(0,c.jsx)("p",{className:"mt-1 text-xs text-red-500",children:W})]}),(0,c.jsx)("div",{className:"w-full",style:{marginTop:"10px"},children:(0,c.jsx)("input",{type:"submit",className:"btn btn-default btn-block btn-indigo ",value:"Submit",onClick:function(){[P].toString().length<20&&[R].toString().length<20?L():(P&&[P].toString().length>=20&&U("the entered value should be in between 1 to 20 digit"),R&&[R].toString().length>=20&&G("the entered value should be in between 1 to 20 digit"))}})})]})})]})]})]})}))}},function(e){e.O(0,[5367,196,7955,6268,4298,5776,9774,2888,179],(function(){return t=18760,e(e.s=t);var t}));var t=e.O();_N_E=t}]);